{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'CSS/Vendas.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>Controle de Vendas</title>
    <link rel="icon" href="./imagens/icon logo TecGestão.png" type="image/x-icon">
</head>
<body>

<!-- Menu Lateral -->
    <nav class="menu-lateral">
        <div class="bnt-expandir">
            <i class="bi bi-list"></i>
        </div>
        <ul>
            <li class="item-menu">
                <a href="{% url 'home' %}">
                    <span class="icon"><i class="bi bi-house"></i></span>
                    <span class="txt-link">Início</span>
                </a>
            </li>
            <li class="item-menu">
                <a href="{% url 'planilhas' %}">
                    <span class="icon"><i class="bi bi-collection"></i></span>
                    <span class="txt-link">Planilhas</span>
                </a>
            </li>
            <li class="item-menu">
                <a href="{% url 'estoque' %}">
                    <span class="icon"><i class="bi bi-box-seam"></i></span>
                    <span class="txt-link">Estoque</span>
                </a>
            </li>
            <li class="item-menu">
                <a href="{% url 'produtos' %}">
                    <span class="icon"><i class="bi bi-cart3"></i></span>
                    <span class="txt-link">Produtos</span>
                </a>
            </li>
            <li class="item-menu">
                <a href="{% url 'clientes' %}">
                    <span class="icon"><i class="bi bi-box-seam"></i></span>
                    <span class="txt-link">Estoque</span>
                </a>
            </li>
            <li class="item-menu">
                <a href="#">
                    <span class="icon"><i class="bi bi-coin"></i></span>
                    <span class="txt-link">Vendas</span>
                </a>
            </li>
        </ul>
    </nav>


    <main class="conteudo-vendas">
        <button id="button_venda" class="button_venda" type="submit">Registrar Venda</button>
        <h1>Controle de Vendas</h1>

        <form id="form-venda">
            <input type="text" id="produto" placeholder="Produto" required>
            <input type="number" id="quantidade" placeholder="Quantidade" required>
            <input type="number" id="precoVenda" placeholder="Preço de Venda" step="0.01" required>
            <input type="number" id="custo" placeholder="Custo" step="0.01" required>
            <input type="date" id="dataVenda" required>

        </form>

        <section id="resumo">
            <p><strong>Total Faturado:</strong> R$ <span id="total-faturado">0.00</span></p>
            <p><strong>Total de Lucro:</strong> R$ <span id="total-lucro">0.00</span></p>
        </section>

        <table>
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Venda (R$)</th>
                    <th>Custo (R$)</th>
                    <th>Lucro (R$)</th>
                    <th>Data</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="tabela-vendas"></tbody>
        </table>
    </main>

    
    <!-- Modal de Cadastro -->
    <div class="modal" id="modalCadastro">
            <div class="modal-conteudo">
                <span class="fechar" id="fecharModal">&times;</span>
                <h2>Cadastrar Novo Produto</h2>
                <form name="form_newItem" id="formCadastro" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="category_in_form_new_material">
                    <label for="unidade_compra" style="margin-top: 10px;">Produtos:</label>
                    <select name="unidade_compra" id="unidade_compra">
                        {% for unidadeC in unidadescompra %}
                        <option value="{{ unidadeC.id }}">{{ unidadeC.nome }}</option>
                        {% endfor %}  
                    </select>
                    </div>

                    <input type="text" name="nome_materia_prima" id="nome-material" placeholder="Nome do Item" required />
                    <input type="number" name="estoque_atual" id="quantidade-produto" placeholder="Quantidade atual" required />
                    <input type="number" name="quantidade-min" id="quantidade-min-produto" placeholder="Quantidade Mínima" required />
                    <input type="number" name="quantidade-max" id="quantidade-max-produto" placeholder="Quantidade Máxima" required />
                    <input type="text" name="FornecedorPreferencial" id="FornecedorPreferencial" placeholder="Fornecedor Preferencial"  />
                    <textarea name="descricao" id="descricao" placeholder="Descrição"></textarea>
                    <input type="number" step="0.01" name="custo_unitario" placeholder="Valor Unitario" required>

                    <div class="category_in_form_new_material">
                    <label for="categoria-produto" style="margin-top: 10px;">Categoria do Item:</label>
                    <select name="categoria" id="categoria-produto" required>
                        {% for c in categorias %}
                        <option value="{{ c.id }}">{{ c.nome }}</option>
                        {% endfor %}  
                    </select>
                    <button type="button" id="button_new_category">+</button>
                    </div>

                    <div class="category_in_form_new_material">
                    <label for="unidade_compra" style="margin-top: 10px;">Unidade de compra:</label>
                    <select name="unidade_compra" id="unidade_compra">
                        {% for unidadeC in unidadescompra %}
                        <option value="{{ unidadeC.id }}">{{ unidadeC.nome }}</option>
                        {% endfor %}  
                    </select>
                    </div>
                    <div class="category_in_form_new_material">
                    <label for="unidade_medida" style="margin-top: 10px;">Unidade de medida:</label>
                    <select name="unidade_medida" id="unidade_medida">
                        {% for unidade in unidadesmedidas %}
                        <option value="{{ unidade.id }}">{{ unidade.nome }}</option>
                        {% endfor %}  
                    </select>
                    </div>
                    <input type="number" step="0.1" name="metragem_por_unidade" placeholder="Metragem por unidade" required>
                    

                    <label for="imagem-url" style="margin-top: 10px;">Imagem do material:</label>
                    <input type="file" name="imagem_material" id="imagem-url" accept="image/*">
                    <img id="imagem-preview" style="display:none; max-width: 100px; margin-top: 10px;" />

                    <button type="submit" name="form_newItem">Cadastrar</button>
                </form>
            </div>
    </div>
    <!-- End Modal de Cadastro -->

    <!-- start security_close_modal -->
    <div class="security_close_modal">
        <div class="security_close_modal" id="select_close_modal" >
            <h3>Você quer continuar?</h3>
            <p>O produto não sera salvo!</p>
            <button id="sim">Sim</button>
            <button id="nao">Não</button>
        </div>
    </div>
    <!-- end security_close_modal -->

    <script src="{% static 'JSs/Vendas.js'%}"></script>
</body>
</html>